<div class="header-wrapper">
  <nav class="navbar bg-light shadow-sm">
    <div
      class="container-fluid flex-wrap justify-content-between align-items-center"
    >
      <a class="navbar-brand me-0 order-1" routerLink="home">
        <img
          src="logo.png"
          alt="Company Logo"
          style="width: 120px; height: 35px"
        />
      </a>

      <form
        (submit)="onSearch(searchValue)"
        class="search d-flex w-30 flex-grow-1 mx-lg-3 my-2 me-2 my-lg-0 order-2 order-lg-2 bg-warning rounded-3"
        role="search"
      >
        <input
          [(ngModel)]="searchValue"
          name="search"
          class="form-control me-2 rounded-0 rounded-start"
          type="search"
          placeholder="Search for products..."
          aria-label="Search"
        />
        <button class="btn border-0 search-icon" type="submit">
          <i class="fa fa-search me-1"></i>
        </button>
      </form>

      <div class="order-3 order-lg-3 me-2">
        <a class="dropdown-item shopping-cart" (click)="openCart()"
          ><i class="fa fa-shopping-cart shopping-cart fa-fw me-1"></i>Cart</a
        >
      </div>

      <div class="order-4 order-lg-4">|</div>

      <div class="profile-section order-5 order-lg-5">
        <ul class="navbar-nav">
          @if (!loggedIn) {
          <li class="nav-item">
            <a class="btn login" routerLink="/login"
              ><i class="fa fa-user-circle fa-fw"></i>Login</a
            >
          </li>
          } @else {
          <li
            class="nav-item dropdown"
            (mouseenter)="showMenu()"
            (mouseleave)="startHideTimer()"
          >
            <a
              class="nav-link dropdown-toggle ms-2"
              role="button"
              aria-expanded="false"
              (click)="toggleDropdown()"
            >
              Hello, <strong>{{ user.userName | titlecase }}</strong>
            </a>
          </li>
          }
        </ul>
      </div>
    </div>
  </nav>
  @if(showDropdown) {

  <ul
    class="dropdown-menu dropdown-menu-end show custom-dropdown-position"
    (mouseenter)="cancelHideTimer()"
    (mouseleave)="startHideTimer()"
  >
    <li>
      <a class="dropdown-item" (click)="openProfile(user.id)"
        ><i class="fa fa-user-circle fa-fw me-2"></i>Profile</a
      >
    </li>
    <li>
      <a class="dropdown-item" (click)="openWishlist(user.id)"
        ><i class="fa fa-heart fa-fw me-2"></i>Wishlist</a
      >
    </li>
    <li>
      <a class="dropdown-item" (click)="openMyOrders(user.id)"
        ><i class="fa fa-box fa-fw me-2"></i>My Orders</a
      >
    </li>
    <li><hr class="dropdown-divider" /></li>
    <li>
      <a class="dropdown-item" (click)="logout()"
        ><i class="fa fa-sign-out-alt fa-fw me-2"></i>Logout</a
      >
    </li>
  </ul>
  }
</div>
