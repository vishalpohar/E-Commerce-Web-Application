<div class="container py-5 fade-in" *ngIf="product">
  <div class="row">
    <div class="col-lg-6 mb-4 mb-lg-0">
      <div class="product-image-wrapper shadow-sm rounded p-3">
        <button
          class="btn btn-wishlist"
          (click)="toggleWishlist(product.id)"
          [class.active]="isWishlisted"
          title="Add to Wishlist"
        >
          <i [class]="isWishlisted ? 'fas fa-heart' : 'far fa-heart'"></i>
        </button>
        <img
          [src]="product.imageUrl"
          alt="{{ product.name }}"
          class="img-fluid main-product-image"
        />
      </div>
    </div>

    <div class="col-lg-6 ps-lg-5">
      <h1 class="display-7 fw-bold fs-2">{{ product.name }}</h1>
      <p class="h2 fw-light text-primary mb-3">
        {{ product.price | currency : "INR" }}
      </p>
      <p class="lead fs-5">{{ product.description }}</p>
      <div class="d-flex align-items-center gap-3 mt-4 pt-2">
        <div *ngIf="!isInCart; else goToCart">
          <button
            class="btn btn-outline-primary px-4"
            (click)="addToCart(product.id)"
          >
            <i class="fas fa-shopping-cart me-2"></i>Add to Cart
          </button>
        </div>
        <ng-template #goToCart>
          <button class="btn btn-outline-success px-4" (click)="openCart()">
            <i class="fas fa-arrow-right me-2"></i>Go to Cart
          </button>
        </ng-template>
        <button class="btn btn-primary px-5" (click)="orderProcess(product.id)">
          Buy Now
        </button>
      </div>
    </div>
  </div>
  <div class="row mt-5 pt-4">
    <div class="col-12">
      <h2 class="mb-4">Related Products</h2>
    </div>

    <div class="col-lg-4 col-md-6 mb-4" *ngFor="let rp of relatedProducts">
      <div
        class="card h-100 shadow-sm related-product-card"
        (click)="viewProduct(rp.id)"
      >
        <div class="image">
          <img [src]="rp.imageUrl" class="card-img-top" alt="{{ rp.name }}" />
        </div>
        <div class="card-body d-flex flex-column">
          <h6 class="card-title fw-bold">
            {{ rp.name | slice : 0 : 50 }}
            {{ rp.name.length > 50 ? "..." : "" }}
          </h6>
          <p class="card-text mt-auto text-muted">
            {{ rp.price | currency : "INR" }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
